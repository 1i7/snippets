var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=PRUM_EPISODES.q||[];PRUM_EPISODES.version="0.2";PRUM_EPISODES.targetOrigin=document.location.protocol+"//"+document.location.hostname;PRUM_EPISODES.bPostMessage=false;PRUM_EPISODES.beaconUrl=PRUM_EPISODES.beaconUrl||"/images/beacon.gif";PRUM_EPISODES.autorun=false;PRUM_EPISODES.init=function(){PRUM_EPISODES.bDone=false;PRUM_EPISODES.bUnloaded=false;PRUM_EPISODES.marks={};PRUM_EPISODES.measures={};PRUM_EPISODES.starts={};PRUM_EPISODES.findStartTime();PRUM_EPISODES.addEventListener("beforeunload",PRUM_EPISODES.beforeUnload,false);PRUM_EPISODES.addEventListener("pagehide",PRUM_EPISODES.beforeUnload,false);PRUM_EPISODES.addEventListener("unload",PRUM_EPISODES.beforeUnload,false);PRUM_EPISODES.addEventListener("load",PRUM_EPISODES.onload,false);PRUM_EPISODES.processQ()};PRUM_EPISODES.processQ=function(){var a=PRUM_EPISODES.q.length;for(var b=0;b<a;b++){var d=PRUM_EPISODES.q[b];var c=d[0];if("mark"===c){PRUM_EPISODES.mark(d[1],d[2])}else{if("measure"===c){PRUM_EPISODES.measure(d[1],d[2],d[3])}else{if("done"===c){PRUM_EPISODES.done(d[1])}}}}};PRUM_EPISODES.mark=function(a,b){PRUM_EPISODES.dprint("PRUM_EPISODES.mark: "+a+", "+b);if(!a){PRUM_EPISODES.dprint("Error: markName is undefined in PRUM_EPISODES.mark.");return}PRUM_EPISODES.marks[a]=parseInt(b||new Date().getTime());if(PRUM_EPISODES.bPostMessage){window.postMessage("PRUM_EPISODES:mark:"+a+":"+b,PRUM_EPISODES.targetOrigin)}if("firstbyte"===a){PRUM_EPISODES.measure("backend","starttime","firstbyte")}else{if("onload"===a){PRUM_EPISODES.measure("frontend","firstbyte","onload");PRUM_EPISODES.measure("page load time","starttime","onload")}else{if("done"===a){PRUM_EPISODES.measure("total load time","starttime","done")}}}};PRUM_EPISODES.measure=function(c,b,e){PRUM_EPISODES.dprint("PRUM_EPISODES.measure: "+c+", "+b+", "+e);if(!c){PRUM_EPISODES.dprint("Error: episodeName is undefined in PRUM_EPISODES.measure.");return}var a;if("undefined"===typeof(b)){if("number"===typeof(PRUM_EPISODES.marks[c])){a=PRUM_EPISODES.marks[c]}else{a=new Date().getTime()}}else{if("number"===typeof(PRUM_EPISODES.marks[b])){a=PRUM_EPISODES.marks[b]}else{if("number"===typeof(b)){a=b}else{PRUM_EPISODES.dprint("Error: unexpected startNameOrTime in PRUM_EPISODES.measure: "+b);return}}}var d;if("undefined"===typeof(e)){d=new Date().getTime()}else{if("number"===typeof(PRUM_EPISODES.marks[e])){d=PRUM_EPISODES.marks[e]}else{if("number"===typeof(e)){d=e}else{PRUM_EPISODES.dprint("Error: unexpected endNameOrTime in PRUM_EPISODES.measure: "+e);return}}}PRUM_EPISODES.starts[c]=parseInt(a);PRUM_EPISODES.measures[c]=parseInt(d-a);if(PRUM_EPISODES.bPostMessage){window.postMessage("PRUM_EPISODES:measure:"+c+":"+a+":"+d,PRUM_EPISODES.targetOrigin)}};PRUM_EPISODES.done=function(a){PRUM_EPISODES.bDone=true;PRUM_EPISODES.mark("done");if(PRUM_EPISODES.autorun){PRUM_EPISODES.sendBeacon()}if(PRUM_EPISODES.bPostMessage){window.postMessage("PRUM_EPISODES:done",PRUM_EPISODES.targetOrigin)}if("function"===typeof(a)){a()}};PRUM_EPISODES.getMarks=function(){return PRUM_EPISODES.marks};PRUM_EPISODES.getMeasures=function(){return PRUM_EPISODES.measures};PRUM_EPISODES.getStarts=function(){return PRUM_EPISODES.starts};PRUM_EPISODES.findStartTime=function(){var a=PRUM_EPISODES.findStartWebTiming()||PRUM_EPISODES.findStartGToolbar()||PRUM_EPISODES.findStartCookie();if(a){PRUM_EPISODES.mark("starttime",a)}};PRUM_EPISODES.findStartWebTiming=function(){var a=undefined;var b=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;if("undefined"!=typeof(b)&&"undefined"!=typeof(b.timing)&&"undefined"!=typeof(b.timing.navigationStart)){a=b.timing.navigationStart;PRUM_EPISODES.dprint("PRUM_EPISODES.findStartWebTiming: startTime = "+a)}return a};PRUM_EPISODES.findStartGToolbar=function(){var a=undefined;if("undefined"!=typeof(window.external)&&"undefined"!=typeof(window.external.pageT)){a=(new Date().getTime())-window.external.pageT}else{if("undefined"!=typeof(window.gtbExternal)&&"undefined"!=typeof(window.gtbExternal.pageT)){a=(new Date().getTime())-window.gtbExternal.pageT()}else{if("undefined"!=typeof(window.chrome)&&"undefined"!=typeof(window.chrome.csi)){a=(new Date().getTime())-window.chrome.csi().pageT}}}if(a){PRUM_EPISODES.dprint("PRUM_EPISODES.findStartGToolbar: startTime = "+a)}return a};PRUM_EPISODES.findStartCookie=function(){var g=document.cookie.split("; ");for(var d=0;d<g.length;d++){if(0===g[d].indexOf("PRUM_EPISODES=")){var a=g[d].substring("PRUM_EPISODES=".length).split("&");var e,f;for(var b=0;b<a.length;b++){if(0===a[b].indexOf("s=")){e=a[b].substring(2)}else{if(0===a[b].indexOf("r=")){var c=a[b].substring(2);f=(escape(document.referrer)==c)}}}if(f&&e){PRUM_EPISODES.dprint("PRUM_EPISODES.findStartCookie: startTime = "+e);return e}}}return undefined};PRUM_EPISODES.beforeUnload=function(a){if(PRUM_EPISODES.bUnloaded){return}document.cookie="PRUM_EPISODES=s="+Number(new Date())+"&r="+escape(document.location)+"; path=/";PRUM_EPISODES.bUnloaded=true};PRUM_EPISODES.onload=function(a){PRUM_EPISODES.mark("onload");PRUM_EPISODES.done()};PRUM_EPISODES.addEventListener=function(c,b,a){if("undefined"!=typeof(window.attachEvent)){return window.attachEvent("on"+c,b)}else{if(window.addEventListener){return window.addEventListener(c,b,a)}}};PRUM_EPISODES.dprint=function(a){};PRUM_EPISODES.init();var _prum=_prum||{id:"",host:null};(function(){var b;var a="//rum-collector.pingdom.net/img/beacon.gif";var e={navigationStart:"nS",unloadEventStart:"uES",unloadEventEnd:"uEE",redirectStart:"rS",redirectEnd:"rE",fetchStart:"fS",domainLookupStart:"dLS",domainLookupEnd:"dLE",connectStart:"cS",connectEnd:"cE",handshakeStart:"hS",requestStart:"reS",responseStart:"resS",responseEnd:"resE",domLoading:"dL",domInteractive:"dI",domContentLoadedEventStart:"dCLES",domContentLoadedEventEnd:"dCLEE",domComplete:"dC",loadEventStart:"lES",loadEventEnd:"lEE"};function f(h,g){var i=new Image();i.src=g+h+(_prum.tags?"&tags="+encodeURIComponent(_prum.tags):"")}function d(){var j=window.performance.timing;var l=window.performance.navigation;if(j.loadEventEnd==0){return false}clearInterval(b);var g="?path="+encodeURIComponent(window.location.href)+"&id="+_prum.id+"&s=nt&rC="+encodeURIComponent(l.redirectCount);var k=j.navigationStart;for(var h in e){if((h in j)&&(h in e)){if(j[h]==0){g+="&"+encodeURIComponent(e[h])+"=-1"}else{g+="&"+encodeURIComponent(e[h])+"="+encodeURIComponent(j[h]-k)}}}g+="&title="+encodeURIComponent(document.title);f(g,a)}function c(){if(!(PRUM_EPISODES&&PRUM_EPISODES.bDone)){return false}clearInterval(b);var i=PRUM_EPISODES.getMeasures();if(i!=null&&i.backend!=null&&i.frontend!=null&&i["page load time"]!=null&&i["total load time"]!=null){var g=i.backend;var j=i.backend+i.frontend;var h="?path="+encodeURIComponent(window.location.href)+"&id="+_prum.id;h+="&s=ep&rC=0&uES=-1&uEE=-1&rS=-1&rE=-1&fS=0&dLS=0&dLE=0&cS=0&cE=0&hS=0&reS=0&";h+="resS="+g+"&resE="+g+"&dL="+g+"&dI="+g+"&dCLES="+g+"&";h+="dCLEE="+j+"&dC="+j+"&lES="+i["page load time"]+"&lEE="+i["total load time"];f(h,a)}}if((_prum.host==null||window.location.hostname==_prum.host)&&_prum.id!=null&&_prum.id.length>0){if(typeof window.performance!="undefined"){b=setInterval(d,500)}else{b=setInterval(c,500)}}})();